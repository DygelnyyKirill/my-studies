"use strict";const formLogin=document.getElementById("login"),formRegist=document.getElementById("register"),message={loading:"img/load.gif"},statusMessage=document.createElement("img");statusMessage.src=message.loading,statusMessage.className="load-form";const formSend=(e,t)=>o=>{o.preventDefault();if(0===formValidate(e)){e.append(statusMessage);const o=new FormData(e),n=JSON.stringify(Object.fromEntries(o.entries()));localStorage.setItem("user",n),console.log(localStorage.getItem("user")),fetch("http://localhost:3000/auth/"+t,{method:"POST",body:n,headers:{"Content-Type":"application/json"}}).then(e=>{console.log(e.text()),showModal()}).catch(()=>{showModal()}).finally(()=>{e.reset(),statusMessage.remove()})}else console.log("This is a required field.")};function formValidate(e){let t=0,o=e.querySelector("._email"),n=e.querySelector("._password");return[o,n].forEach(e=>fieldRemoveError(e)),validateEmail(o)&&(fieldAddError(o),t++),""===n.value&&(fieldAddError(n),t++),t}function fieldAddError(e){e.parentElement.classList.add("_error"),e.classList.add("_error"),console.log("This is a required field.")}function fieldRemoveError(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error"),console.log("ok")}function validateEmail(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}formLogin.addEventListener("submit",formSend(formLogin,"login")),formRegist.addEventListener("submit",formSend(formRegist,"register"));const authBth=document.getElementById("form-modal"),modal=document.querySelector(".modal"),formBox=document.querySelector(".form-box"),contentModal=document.querySelector(".text-content");function showModal(){modal.style.display="flex";const e=document.createElement("div");e.className="text-content",e.textContent="Login was successful",contentModal.appendChild(e),setTimeout(()=>{modal.style.display="none"},1500)}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("login"),t=document.getElementById("register"),o=document.getElementById("log-btn"),n=document.getElementById("reg-btn"),s=document.getElementById("btn");n.addEventListener("click",(function(){e.style.left="-400px",t.style.left="50px",s.style.left="110px"})),o.addEventListener("click",(function(){e.style.left="50px",t.style.left="450px",s.style.left="0px"}))}));const addMessage=document.querySelector(".message"),addBtn=document.querySelector(".add"),todo=document.querySelector(".todo"),containerTodo=document.querySelector(".containerTodo");let todoList=[];function displayMessages(){let e="";todoList.forEach((function(t,o){e+=`\n        <li>\n            <input type="checkbox" id="item_${o}" ${t.checked?"checked":""}>\n            <label for="item_${o}" class="${t.important?"important":""}">${t.todo}</label>\n        </li>\n        `,todo.innerHTML=e}))}localStorage.getItem("todo")&&(todoList=JSON.parse(localStorage.getItem("todo")),displayMessages()),addBtn.addEventListener("click",(function(){const e={todo:addMessage.value,checked:!1,important:!1};todoList.push(e),displayMessages(),localStorage.setItem("todo",JSON.stringify(todoList))})),todo.addEventListener("change",(function(e){const t=todo.querySelector("[for="+e.target.getAttribute("id")+"]").innerHTML;todoList.forEach((function(e){e.todo===t&&(e.checked=!e.checked,localStorage.setItem("todo",JSON.stringify(todoList)))})),console.log("valueLabel:",t)})),todo.addEventListener("contextmenu",(function(e){e.preventDefault(),todoList.forEach((function(e,t){e.todo===event.target.innerHTML&&(event.ctrlKey?todoList.splice(t,1):e.important=!e.important,displayMessages(),localStorage.setItem("todo",JSON.stringify(todoList)))}))}));